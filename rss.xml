<?xml version="1.0" encoding="UTF-8"?><rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title><![CDATA[Coding Day]]></title><description><![CDATA[A set of tools for blockchain users.]]></description><link>https://tools.rebase.network</link><generator>RSS for Node</generator><lastBuildDate>Mon, 20 May 2019 09:30:12 GMT</lastBuildDate><item><title><![CDATA[Big Tree Game]]></title><description><![CDATA[最终的代码可以参考：bigtree 遇到问题如果短时间搞不定，可以参考上面的代码，运行命令：app应该就能运行起来了。有个线上演示版本 https://bigtree-1258120565.cos-website.ap-beijing.myqcloud.com…]]></description><link>https://tools.rebase.network/big-tree-game/</link><guid isPermaLink="false">https://tools.rebase.network/big-tree-game/</guid><pubDate>Sat, 18 May 2019 22:40:32 GMT</pubDate><content:encoded>&lt;p&gt;最终的代码可以参考：&lt;a href=&quot;https://github.com/NervosBeijingCommunity/first-forever-simplified/tree/bigtree&quot;&gt;bigtree&lt;/a&gt; 遇到问题如果短时间搞不定，可以参考上面的代码，运行命令：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;npm install &amp;amp;&amp;amp; npm start&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;app应该就能运行起来了。&lt;/p&gt;
&lt;p&gt;有个线上演示版本 &lt;a href=&quot;https://bigtree-1258120565.cos-website.ap-beijing.myqcloud.com/&quot;&gt;https://bigtree-1258120565.cos-website.ap-beijing.myqcloud.com/&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;游戏规则&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;./game.md&quot;&gt;Bigtree游戏规则&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;0 环境安装&lt;/h2&gt;
&lt;h3&gt;操作系统&lt;/h3&gt;
&lt;p&gt;推荐使用Mac或者Ubuntu。&lt;/p&gt;
&lt;p&gt;如果使用 &lt;strong&gt;Windows，可以使用虚拟机在Windows系统中安装一个Linux的Ubunut系统，&lt;/strong&gt; 2种做法都可以：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;虚拟机VirtualBox官网下载 &lt;a href=&quot;https://www.virtualbox.org/wiki/Downloads&quot;&gt;https://www.virtualbox.org/wiki/Downloads&lt;/a&gt;，并安装ubunut镜像。&lt;/li&gt;
&lt;li&gt;开启 Windows 10 的 Linux 子系统并安装Ubunut镜像，切记是Windows10，不是Windows8，也不是Windows7，版本不能低于Window10，参考： &lt;a href=&quot;https://www.jianshu.com/p/UpwXzQ&quot;&gt;https://www.jianshu.com/p/UpwXzQ&lt;/a&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;安装node&lt;/h3&gt;
&lt;p&gt;直接下载&lt;a href=&quot;https://nodejs.org/&quot;&gt;Node.js&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;如果熟悉命令行，可以用 &lt;a href=&quot;https://github.com/creationix/nvm&quot;&gt;nvm&lt;/a&gt; 安装Node.js&lt;/p&gt;
&lt;p&gt;命令如下：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.34.0/install.sh | bash

nvm install v10.15.0 # 安装v10.15.0版本的nodejs&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;安装完之后，把npm的官方源替换为淘宝源，国内使用淘宝源下载速度会更快。&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;npm config set registry http://registry.npm.taobao.org/&lt;/code&gt;&lt;/p&gt;
&lt;h3&gt;安装代码编辑器 vscode 稳定版，即Stable版&lt;/h3&gt;
&lt;p&gt;下载&lt;a href=&quot;https://code.visualstudio.com/&quot;&gt;Visual Studio Code稳定版&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;1 创建项目&lt;/h2&gt;
&lt;p&gt;在命令行运行如下命令，安装 create-react-app 工具：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;npm install create-react-app -g # g是global的缩写，即全局的意思&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;教练&lt;/strong&gt;：解释一下什么是npm和package？&lt;/p&gt;
&lt;p&gt;##########################成功日志##########################&lt;/p&gt;
&lt;p&gt;Success! Created bigtree at ~/bigtree
Inside that directory, you can run several commands:&lt;/p&gt;
&lt;p&gt;  yarn start
    Starts the development server.&lt;/p&gt;
&lt;p&gt;  yarn build
    Bundles the app into static files for production.&lt;/p&gt;
&lt;p&gt;  yarn test
    Starts the test runner.&lt;/p&gt;
&lt;p&gt;  yarn eject
    Removes this tool and copies build dependencies, configuration files
    and scripts into the app directory. If you do this, you can’t go back!&lt;/p&gt;
&lt;p&gt;We suggest that you begin by typing:&lt;/p&gt;
&lt;p&gt;  cd bigtree
  yarn start&lt;/p&gt;
&lt;p&gt;Happy hacking!&lt;/p&gt;
&lt;p&gt;##########################成功日志##########################&lt;/p&gt;
&lt;p&gt;在命令行运行如下命令，创建项目：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;create-react-app bigtree&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;会创建一个名为bigtree的项目文件夹&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;教练&lt;/strong&gt;：解释一下上面都做了什么？&lt;/p&gt;
&lt;p&gt;在命令行中运行如下命令：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;cd bigtree
npm install @cryptape/cita-sdk --save&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;##########################成功日志##########################&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;@cryptape/cita-sdk@0.23.0&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;added 366 packages from 306 contributors, removed 426 packages, updated 1286 packages in 194.168s
found 2 high severity vulnerabilities&lt;/p&gt;
&lt;p&gt;##########################成功日志##########################&lt;/p&gt;
&lt;p&gt;如果有如下错误提示：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;npm ERR! code ELiFECYCLE
npm ERR! errno 1
npm ERR! scrypt@6.0.3 install: `node-gyp rebuild`
npm ERR! Exit status 1&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;请看&lt;a href=&quot;./qa.md&quot;&gt;node-gyp安装问题&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;执行&lt;code class=&quot;language-text&quot;&gt;npm start&lt;/code&gt;，几秒钟后会自动打开一个网页 &lt;code class=&quot;language-text&quot;&gt;http://localhost:3000/&lt;/code&gt;，表明项目初始化并运行成功。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;教练&lt;/strong&gt;：介绍一下什么是React和HTML有什么关系？&lt;/p&gt;
&lt;h2&gt;2 申请测试链代币&lt;/h2&gt;
&lt;h3&gt;生成账户&lt;/h3&gt;
&lt;p&gt;访问网址获取私钥和地址：
&lt;a href=&quot;http://nervosbj.org/tools/eth-key.html&quot;&gt;http://nervosbj.org/tools/eth-key.html&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/7e5d47a04a5a12c4683c450940447daf/2d178/eth-key.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 60.58558558558559%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsSAAALEgHS3X78AAABaUlEQVQoz6VS20rDQBDNt4pf4EeI7+JH6IPgB/hSfBFfKqVpejdtTNNcu5fsNbvrNAUbikXBYTJsyDlzdibHQwgnWV5Wu+0222zTotwV1a5CmHHOhWhTQgoha8a7CRjPdcJ2zsYYYBJKac0Aiknd/XoI7+TdtgEHkNqk+XIVhet4HSfzjzW0awH7POh47h/hdTUxoUmax0laVKjEJCmrDJGKsk1RxnkZpbAaVKV1FiHJ9aly0zRKaam15lyvVmoyVbOZHgVqPJG+L+cL3RgtjRLaGnv+2kq5MLTBuAkm5n1g/MAOhm6x+GVhRzJAl76LRm7Wd+HQDftuPP0Teb9w29y96MsHffWkL+71c6BgLGPPkCVMCw+MZSwU6PDou5uevX111z339rnvqTSsxQAG1gICRzKYARHCGEeYIAzmYKapnaXOMahS1pjWuAUwLsB98Nt/MAmAwFtSKS4U5ZK1lUu4lhJSgvQ3+At40LSyBO2MRgAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;eth key&quot;
        title=&quot;&quot;
        src=&quot;/static/7e5d47a04a5a12c4683c450940447daf/b9e4f/eth-key.png&quot;
        srcset=&quot;/static/7e5d47a04a5a12c4683c450940447daf/cf440/eth-key.png 148w,
/static/7e5d47a04a5a12c4683c450940447daf/d2d38/eth-key.png 295w,
/static/7e5d47a04a5a12c4683c450940447daf/b9e4f/eth-key.png 590w,
/static/7e5d47a04a5a12c4683c450940447daf/f9b6a/eth-key.png 885w,
/static/7e5d47a04a5a12c4683c450940447daf/2d849/eth-key.png 1180w,
/static/7e5d47a04a5a12c4683c450940447daf/bbefa/eth-key.png 1770w,
/static/7e5d47a04a5a12c4683c450940447daf/2d178/eth-key.png 1776w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;将生成的私钥和地址保存好，后面会用到。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;不要将这里获取的私钥跟地址，当自己的钱包地址用来接收交易&lt;/strong&gt;
&lt;strong&gt;不要将这里获取的私钥跟地址，当自己的钱包地址用来接收交易&lt;/strong&gt;
&lt;strong&gt;不要将这里获取的私钥跟地址，当自己的钱包地址用来接收交易&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;特别注意，私钥 privateKey 是不能泄露给任何人的。上面这个账户就是临时用一下，所以无所谓了。
于是，account 就到手了。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;教练&lt;/strong&gt;：
解释一下什么是加密货币钱包？
地址和私钥是什么？
为什么私钥很重要？&lt;/p&gt;
&lt;p&gt;参考：&lt;a href=&quot;https://learning.nervos.org/nerv-first/6-wallet&quot;&gt;https://learning.nervos.org/nerv-first/6-wallet&lt;/a&gt;&lt;/p&gt;
&lt;h3&gt;充值&lt;/h3&gt;
&lt;p&gt;使用浏览器打开网页 &lt;a href=&quot;https://dapp.cryptape.com/faucet/&quot;&gt;https://dapp.cryptape.com/faucet/&lt;/a&gt;)，然后输入上一步得到的地址(address)，点击 &lt;em&gt;Get Testnet Token&lt;/em&gt;
按钮就可以获取免费的代币了。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img.haoqicat.com/2018091201.jpg&quot; alt=&quot;图片&quot;&gt;&lt;/p&gt;
&lt;p&gt;然后，到 AppChain 的区块链浏览器，也就是 &lt;a href=&quot;http://microscope.cryptape.com/&quot;&gt;microscope.cryptape.com&lt;/a&gt; 上，输入账户地址（address），就可以查询到账户余额了。&lt;/p&gt;
&lt;p&gt;这样账户中就有了余额，后续操作就都可以顺利进行了。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img.haoqicat.com/2018091202.jpg&quot; alt=&quot;图片&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;教练&lt;/strong&gt;：解释一下什么是Nervos？解释一下什么是区块链浏览器？&lt;/p&gt;
&lt;p&gt;参考：&lt;a href=&quot;https://learning.nervos.org/nerv-first/2-nervos&quot;&gt;https://learning.nervos.org/nerv-first/2-nervos&lt;/a&gt;
Nervos 是一个网络，分上下两层，底层的 CKB 负责安全和共识，上层的各种方案保证性能。Nervos 要为各个企业搭建自己的公链和开发 DApp 提供成套的基础设施，让大家直接上手就能实现自己的想法，而不必重新造轮子。&lt;/p&gt;
&lt;h2&gt;3 部署智能合约&lt;/h2&gt;
&lt;p&gt;使用代码编辑器打开创建的bigtree文件夹，在文件夹src/下创建一个文件config.js，添加如下代码：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;const config = {
  chain: &amp;#39;https://node.cryptape.com&amp;#39;,
  contractAddress: &amp;#39;&amp;#39;, // 暂时留空，后面会添加
  fromAddress: &amp;#39;YOUR_ADDRESS&amp;#39;,
  privateKey: &amp;#39;YOUR_PRIVATE_KEY&amp;#39;
}
module.exports = config&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;将fromAddress, privateKey(私钥)替换成自己的，contractAddress在后面部署合约成功后再添加。&lt;/p&gt;
&lt;p&gt;这样配置文件就写好了。&lt;/p&gt;
&lt;p&gt;在文件夹 &lt;code class=&quot;language-text&quot;&gt;src/&lt;/code&gt;下创建一个文件 &lt;code class=&quot;language-text&quot;&gt;nervos.js&lt;/code&gt;，添加如下代码：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;const {
  default: Nervos
} = require(&amp;#39;@cryptape/cita-sdk&amp;#39;)

const config = require(&amp;#39;./config&amp;#39;)

const nervos = Nervos(config.chain) // config.chain indicates that the address of Appchain to interact
const account = nervos.base.accounts.privateKeyToAccount(config.privateKey) //create account by private key from config

nervos.base.accounts.wallet.add(account)

module.exports = nervos&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;创建 nervos.js 文件，初始化 nervos 对象。通过使用&lt;code class=&quot;language-text&quot;&gt;config.chain&lt;/code&gt;，指定了要跟哪条区块链进行交互。privateKeyToAccount 用私钥生成 account。
通过 wallet.add 接口把 account 添加到了 nervos 对象中并最终导出。&lt;/p&gt;
&lt;p&gt;在文件夹&lt;code class=&quot;language-text&quot;&gt;src/&lt;/code&gt;下创建一个文件&lt;code class=&quot;language-text&quot;&gt;simpleStore.js&lt;/code&gt;，添加如下代码：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;const nervos = require(&amp;#39;./nervos&amp;#39;)
const {
  abi
} = require(&amp;#39;./contracts/compiled.js&amp;#39;)
const {
  contractAddress
} = require(&amp;#39;./config&amp;#39;)

const transaction = require(&amp;#39;./contracts/transaction&amp;#39;)
const simpleStoreContract = new nervos.base.Contract(abi, contractAddress)
module.exports = {
  transaction,
  simpleStoreContract
}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;合约的编译：&lt;/strong&gt;
&lt;strong&gt;注意：编译器版本选择0.4.26，最新的编译器版本会有问题。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;打开网址 &lt;a href=&quot;https://remix.ethereum.org/&quot;&gt;https://remix.ethereum.org/&lt;/a&gt; 将下面的代码粘贴到remix的代码编辑区域中，&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;获取合约代码：&lt;/strong&gt;
从这个网址得到：&lt;a href=&quot;https://github.com/NervosBeijingCommunity/first-forever-simplified/blob/bigtree/combined.sol&quot;&gt;https://github.com/NervosBeijingCommunity/first-forever-simplified/blob/bigtree/combined.sol&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;教练&lt;/strong&gt;：介绍一下智能合约和Solidity？&lt;/p&gt;
&lt;p&gt;参考：
&lt;a href=&quot;https://learning.nervos.org/nerv-first/3-dev&quot;&gt;https://learning.nervos.org/nerv-first/3-dev&lt;/a&gt;
&lt;a href=&quot;https://learning.nervos.org/nerv-first/4-sol&quot;&gt;https://learning.nervos.org/nerv-first/4-sol&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/dccd8e63b09c498cdc3dab5c842536b4/a987b/remix.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAABGklEQVQoz82ROU7DUBCGcycOQMMdOAIXQaKnoOIWFCxCQkoUUSFEg4VxAkTGNvZ7z8vbd15sha1hScNo9FfzzfLPyK8Ro58UOdfn3+AvrT7BSlmMKWOqn+Ck0lJq1auUSigNiCprBogw1oe07gNMmX7O2Auo2042nUCoI1QKIY2x1oZuPsnw8T2IHlEyB7MHJIR7hxnXEPI0r4oKohajBgeYc661Hoqm1/nuaXQyXpxN0vNJhho5GLGEO8zzQleQEBY2tcp4pb22PrADDhtykVYVZi0Ti5ZSqYfTlzChHBMTlDFmjHmzd4ijot6PwV5UHsTwMEFl56z5zm230p2bp43x7fbVbHN6t3UZl6uxv3iVtM46t/6f/wP8CuMm9OvRlZ10AAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;图片&quot;
        title=&quot;&quot;
        src=&quot;/static/dccd8e63b09c498cdc3dab5c842536b4/b9e4f/remix.png&quot;
        srcset=&quot;/static/dccd8e63b09c498cdc3dab5c842536b4/cf440/remix.png 148w,
/static/dccd8e63b09c498cdc3dab5c842536b4/d2d38/remix.png 295w,
/static/dccd8e63b09c498cdc3dab5c842536b4/b9e4f/remix.png 590w,
/static/dccd8e63b09c498cdc3dab5c842536b4/f9b6a/remix.png 885w,
/static/dccd8e63b09c498cdc3dab5c842536b4/2d849/remix.png 1180w,
/static/dccd8e63b09c498cdc3dab5c842536b4/bbefa/remix.png 1770w,
/static/dccd8e63b09c498cdc3dab5c842536b4/a987b/remix.png 1920w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;然后点右侧的 start to compile进行编译。这里需要注意，有的时候需要稍微提高一下合约声明的版本号，才能编译通过。&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/652ab9823d87fc76355dbd3cea974160/8e724/remix-detail.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAPoAAAD6AG1e1JrAAAB5UlEQVQoz6WSXU/TUBjH9238BHwGEy+88Z4rbogXBm5MlhgD9MIx4hKYNCMkQuCCRCJa43zJho2ionGBvTDb0W11Yl1bOtue9vRl7TmesoVWb2l+ydPTnF+env95UvgKTwohREq/L7PsgSQphgGHQ+z7/0C+1Ovfy2W2XHon92Wyf2SlwjAkpdHglpbyZ2fqYOBCG9tWjAWQ7+HdJ0x6IXt3LnNwVI/lUWmdtguFx9rAtqyQyElsCwVDvL3F3Jl5MDWbff+1EcnhuHNUOE6g6Q1F0TXNhhA5EF8C7Ujeefri3n3q1srmYfOU7A+TnXleWF/fEkXlhzgwdGQa+BKyJP2Lxf3cQ/o2vX3cbP0vC0J79VFBVQ0Ahp6HXTfGcVAQ4NLLEp1ZnlnZ5C7k8W+Pz9wS1tY2zlWgqpah+wCEwAxGmEbg2Wj6kLu293Hi1bcbn/nrR70u9OO0a7VaZjEry1anrRBEUet2VbF73umo5F1T4Oynk4ld9ibzYfILP3ki/XQScrVapShK/2O7DnYdElgMyS8M8H6xtJrNLy/mhSafTDuSK5VKOp3+LemmgSyT3G0MMJEL8d6z1/NUbn4hd1xtRoElz9zr9Z4zDDC9i84xDgEiMmT1Gvf2DUuQfvXjIbnKbP8Fes+9mRY5X3MAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;图片&quot;
        title=&quot;&quot;
        src=&quot;/static/652ab9823d87fc76355dbd3cea974160/b9e4f/remix-detail.png&quot;
        srcset=&quot;/static/652ab9823d87fc76355dbd3cea974160/cf440/remix-detail.png 148w,
/static/652ab9823d87fc76355dbd3cea974160/d2d38/remix-detail.png 295w,
/static/652ab9823d87fc76355dbd3cea974160/b9e4f/remix-detail.png 590w,
/static/652ab9823d87fc76355dbd3cea974160/f9b6a/remix-detail.png 885w,
/static/652ab9823d87fc76355dbd3cea974160/2d849/remix-detail.png 1180w,
/static/652ab9823d87fc76355dbd3cea974160/bbefa/remix-detail.png 1770w,
/static/652ab9823d87fc76355dbd3cea974160/8e724/remix-detail.png 2880w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;编译的输出可以通过点 details 按钮得到，这样合约就编译好了。&lt;/p&gt;
&lt;p&gt;在文件夹&lt;code class=&quot;language-text&quot;&gt;src/&lt;/code&gt;下创建文件夹&lt;code class=&quot;language-text&quot;&gt;contracts&lt;/code&gt;，然后再文件夹中创建一个文件&lt;code class=&quot;language-text&quot;&gt;compiled.js&lt;/code&gt;，并添加如下代码：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;// deploy/compiled.js
const bytecode = &amp;#39;稍后替换成真正的值&amp;#39;
const abi = &amp;#39;稍后替换成真正的值&amp;#39;
module.exports = {
    abi,
    bytecode
}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;其中 bytecode 一项，就是 remix 最终编译结果中 bytecode 一项下的 &lt;strong&gt;object 那个字段的值&lt;/strong&gt;，
是一个长长的字符串，这点要注意，不要把全部内容都复制过来。如下图所示，就是 “6080…” 开始的这个双引号中的值。&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/e58cc69cc390c10c2b6757a234beb022/5d21f/bytecode.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 22.786647314949203%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAAsSAAALEgHS3X78AAABBklEQVQY0z2Iy06DQBhGeQulwFjbCC3M/AwM91osUG5twdKFJIZEjdGFbowL3bnRBxfUmJycfN/hkIR4ftyUJ083wnUz+nwbf71LL4/CQzd6vuOz1ajKhY9XydDR0TESJSSISBT/zLlUjlxt6cx8NvXZxIDpbTu5705nimiACETCGFGQ1DmSz5AiD8g/VhTEdXvcFkaTQnmh7mJchtoh19oN1DFUMa5j0scqIpuVelXodYIvE9ykZL/GdUS4vppzzdJUpqke4ICCjbFHoB+BThYUfvGBhKb+fwNKbBW4Q0pCRmOHnhskcWjmm9uFVfhsIGC5z9buUDLP3AZ2ZOmpa/TslnZssW9v+z+bsgoDZAAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;图片&quot;
        title=&quot;&quot;
        src=&quot;/static/e58cc69cc390c10c2b6757a234beb022/b9e4f/bytecode.png&quot;
        srcset=&quot;/static/e58cc69cc390c10c2b6757a234beb022/cf440/bytecode.png 148w,
/static/e58cc69cc390c10c2b6757a234beb022/d2d38/bytecode.png 295w,
/static/e58cc69cc390c10c2b6757a234beb022/b9e4f/bytecode.png 590w,
/static/e58cc69cc390c10c2b6757a234beb022/5d21f/bytecode.png 689w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;而 abi 一项就是一个数组，就直接在 remix 界面中的 abi 一项下，直接点 copy 图标。&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/639f9a2b7445daea23f3dc4dc0e50eb6/d3bcb/copy.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block;  max-width: 325px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 52.615384615384606%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsSAAALEgHS3X78AAABzUlEQVQoz3WSy27TQBSGvWHHA7BBiMfqjodggUBISKwQCCRUNqyQyg5xU5TSUEFoSZumjdtcSi514saX2LHj6/iKZzzDMRVWitTRp39mNOfo/GdmOFGyFQ3NF6GqB/Lcl1RPnnugmhHbXm655Cocn3C7zcFea9zuSC1+urtfrJtHwv7hqDvQVCOTtFjWE1kDUmWRraKZmGNXD8pYTgulpV6GC0ISRASFeRDlKMRRwhRVq1WeVD692t5cb/548f3L4+qH+z/rG3AEkWGcl3BewEpcRMKU1aovnz249ujuzacPb7xdv/3u9a03z6+/31hz/ga4iAIX8ZBMS1yUo4gNR6d7jS2eb3SOt/vdeq/XaB3UhckwxSxKaZKxIGZ+WMBhTP8Dxr+mExy1YU6S346f9H7NJqJ5Nl3oRgSZRWVC6Cp5zkAxJhnOCGWpv0ONO659Dgmd/lScLU+HsqojSAbz3EUPJZaLDSuFNwRMJ18uZU+65/s6igvPYBhsA2HCUMi4ldui0PC5ZB0c9j9+rlWq3/iTEfyfza8t/kQYjJTxRK9u7XT7Yvt4fMQPof6l2wYzuhnPFEcQDUFcwMKwYmOJTDsFR7ZHdDMCX6AAbP8AO4RT/osYqdUAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;图片&quot;
        title=&quot;&quot;
        src=&quot;/static/639f9a2b7445daea23f3dc4dc0e50eb6/d3bcb/copy.png&quot;
        srcset=&quot;/static/639f9a2b7445daea23f3dc4dc0e50eb6/cf440/copy.png 148w,
/static/639f9a2b7445daea23f3dc4dc0e50eb6/d2d38/copy.png 295w,
/static/639f9a2b7445daea23f3dc4dc0e50eb6/d3bcb/copy.png 325w&quot;
        sizes=&quot;(max-width: 325px) 100vw, 325px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;然后把拷贝到的内容粘贴到 compiled.js 文件中即可。&lt;/p&gt;
&lt;p&gt;我在 Github 上也上传了一个真实可用的版本供大家参考：&lt;a href=&quot;https://github.com/NervosBeijingCommunity/first-forever-simplified/blob/bigtree/src/contracts/compiled.js&quot;&gt;https://github.com/NervosBeijingCommunity/first-forever-simplified/blob/bigtree/src/contracts/compiled.js&lt;/a&gt; 。&lt;/p&gt;
&lt;p&gt;在文件夹&lt;code class=&quot;language-text&quot;&gt;src/contracts/&lt;/code&gt;下创建一个文件&lt;code class=&quot;language-text&quot;&gt;transaction.js&lt;/code&gt;，添加如下代码：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;const nervos = require(&amp;#39;../nervos&amp;#39;)

const transaction = {
  from: nervos.base.accounts.wallet[0].address,
  privateKey: nervos.base.accounts.wallet[0].privateKey,
  nonce: 999999,
  quota: 1000000 * 10,
  chainId: 1,
  version: 1,
  validUntilBlock: 999999,
  value: &amp;#39;0x0&amp;#39;
};

module.exports = transaction&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;创建 &lt;code class=&quot;language-text&quot;&gt;transaction.js&lt;/code&gt; 文件, from 一项指定了我们自己账户的地址。注意这里没有 to 也就是没有接收方。privateKey 一项用来指定私钥。
&lt;strong&gt;特别说明一下，私钥是不能暴露给任何人的，这里为了演示方便，我们直接把私钥写到了代码中，但是实际的 DApp 一般都是开源软件，所以私钥是不能写到代码中的。&lt;/strong&gt;
AppChain 的解决方式是把私钥保存到 Neuron 钱包中，需要进行交易的时候，让代码跟 Neuron 交互来完成签名。
当然，我们这里先不涉及 Neuron ，暂时把私钥写到了代码中。value 是交易数额，这里设置为0。
后面的 quota，nonce ，chainId ，version ，validUntilBlock 都是跟交易安全相关的设置，可以到 CITA 的官方文档上，
找到各自的含义：&lt;a href=&quot;https://docs.citahub.com/zh-CN/cita/configuration/service-config#rpc%E3%80%82&quot;&gt;https://docs.citahub.com/zh-CN/cita/configuration/service-config#rpc。&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;在文件夹&lt;code class=&quot;language-text&quot;&gt;src/contracts/&lt;/code&gt;下创建一个文件&lt;code class=&quot;language-text&quot;&gt;deploy.js&lt;/code&gt;，添加如下代码：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;const nervos = require(&amp;#39;../nervos&amp;#39;)
const {
  abi,
  bytecode
} = require(&amp;#39;./compiled.js&amp;#39;)

const transaction = require(&amp;#39;./transaction&amp;#39;)
let _contractAddress = &amp;#39;&amp;#39;
// contract contract instance
const myContract = new nervos.base.Contract(abi)

nervos.base.getBlockNumber().then(current =&amp;gt; {
    transaction.validUntilBlock = +current + 88 // update transaction.validUntilBlock
    // deploy contract
    return myContract.deploy({
      data: bytecode,
      arguments: [],
    }).send(transaction)
  }).then(txRes =&amp;gt; {
    if (txRes.hash) {
      // get transaction receipt
      return nervos.listeners.listenToTransactionReceipt(txRes.hash)
    } else {
      throw new Error(&amp;quot;No Transaction Hash Received&amp;quot;)
    }
  })
  .then(res =&amp;gt; {
    const {
      contractAddress,
      errorMessage,
    } = res
    if (errorMessage) throw new Error(errorMessage)
    console.log(`contractAddress is: ${contractAddress}`)
    _contractAddress = contractAddress
    return nervos.base.storeAbi(contractAddress, abi, transaction) // store abi on the chain
  }).then(res =&amp;gt; {
    if (res.errorMessage) throw new Error(res.errorMessage)
    return nervos.base.getAbi(_contractAddress, &amp;#39;pending&amp;#39;).then(
      res =&amp;gt; {
      console.log(res)
      console.log(`\n\n contractAddress is: ${_contractAddress}`)
      }
    ) // get abi from the chain
  }).catch(err =&amp;gt; console.error(err))&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;创建 deploy.js，用来 deploy 字节码，然后就可以从 receipt 也就是回执中，得到合约地址并打印出来。
通过 storeAbi 接口把合约 ABI 发送到链上。具体各个接口的描述可以参考：&lt;a href=&quot;https://www.npmjs.com/package/@cryptape/cita-sdk&quot;&gt;@cryptape/cita-sdk&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;在命令行运行命令：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;node src/contracts/deploy.js&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;部署成功，可以看到打印出了合约地址和 ABI 信息。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;...
...
...

contractAddress is: 0xccDDFf1d5a0b3A412Dd1eD97Dbf661cb4E30f732&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;然后打开连接 &lt;a href=&quot;https://microscope.cryptape.com/&quot;&gt;https://microscope.cryptape.com/&lt;/a&gt; 搜索打印出的合约地址，发现出现的是一个 Account，
下面有 Contract Panel 一项。点开，可以看到合约代码中对应的接口的相关界面。&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/cc2ff1a869d3fc421f641ddaa0610e1f/292c1/abi.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 86.81710213776722%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAIAAABSJhvpAAAACXBIWXMAAAsSAAALEgHS3X78AAABXUlEQVQ4y51Ta2/DIAzs//+B+7Bp07SkVRpeSQgYMJBd006rqq6PnZBlHsbGd2yUNt2+b9pd07RN28KX2gilMHophVRCyl4cnF6oYZw8kfMEZ5zsZlmWUpedCVqbYRiZmYhyzvM8p5Scc5nZe19rXX5gV+DkJq+gEIYVMUSNbPt+HAbcYoxBfCmlnqGsgHMKxoRXlJzZB3ZUQjr4WCll+QOn4PMl3JSYMc5LfSy41u1226M5SiPtc8HINo6jtQ5ZQ4jO+5R4nh1znqyFf79s8jYF8hS0Md6vloJUCiTdzLza986/7YlBlad0oArkFZSTmO8Hf+rlw/xOn+i2UmrQEgM9u9i6320hxGynGMhRQIdu8HUlM6Je2vAq69NlH0+3unyZ/J83Sykng2eL2fkj86t9TCRd10EmUAgeDIYgD1AFG2O8EOyVzFAlxBQTQxj4tLgEvzXEKJWOMZ2f/AaBZOVkeSJ60gAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;abi&quot;
        title=&quot;&quot;
        src=&quot;/static/cc2ff1a869d3fc421f641ddaa0610e1f/b9e4f/abi.png&quot;
        srcset=&quot;/static/cc2ff1a869d3fc421f641ddaa0610e1f/cf440/abi.png 148w,
/static/cc2ff1a869d3fc421f641ddaa0610e1f/d2d38/abi.png 295w,
/static/cc2ff1a869d3fc421f641ddaa0610e1f/b9e4f/abi.png 590w,
/static/cc2ff1a869d3fc421f641ddaa0610e1f/f9b6a/abi.png 885w,
/static/cc2ff1a869d3fc421f641ddaa0610e1f/2d849/abi.png 1180w,
/static/cc2ff1a869d3fc421f641ddaa0610e1f/292c1/abi.png 1684w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;打开&lt;code class=&quot;language-text&quot;&gt;src/config.js&lt;/code&gt;文件，修改&lt;code class=&quot;language-text&quot;&gt;contractAddress&lt;/code&gt; 的值为上面得到的合约地址：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;const config = {
  chain: &amp;#39;https://node.cryptape.com&amp;#39;,
  contractAddress: &amp;#39;上面得到的合约地址&amp;#39;,  // 修改这一行
  fromAddress: &amp;#39;YOUR_ADDRESS&amp;#39;,
  privateKey: &amp;#39;YOUR_PRIVATE_KEY&amp;#39;
}
module.exports = config&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;这样我们合约部分的代码就完成了。&lt;/p&gt;
&lt;h2&gt;4 与合约交互&lt;/h2&gt;
&lt;p&gt;添加需要用到的npm package&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;npm install react-countdown-now --save
npm install autoscroll-react --save&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;清空&lt;code class=&quot;language-text&quot;&gt;src/App.js&lt;/code&gt;文件内容，将 &lt;a href=&quot;https://github.com/NervosBeijingCommunity/first-forever-simplified/blob/bigtree/src/App.js&quot;&gt;https://github.com/NervosBeijingCommunity/first-forever-simplified/blob/bigtree/src/App.js&lt;/a&gt; 复制代码到这个文件。&lt;/p&gt;
&lt;p&gt;清空&lt;code class=&quot;language-text&quot;&gt;src/App.css&lt;/code&gt;文件内容，将 &lt;a href=&quot;https://github.com/NervosBeijingCommunity/first-forever-simplified/blob/bigtree/src/App.css&quot;&gt;https://github.com/NervosBeijingCommunity/first-forever-simplified/blob/bigtree/src/App.css&lt;/a&gt; 复制代码到这个文件&lt;/p&gt;
&lt;p&gt;额外需要添加的文件夹： &lt;strong&gt;手动复制&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;src/images&lt;/code&gt;
&lt;code class=&quot;language-text&quot;&gt;public/images&lt;/code&gt;
&lt;code class=&quot;language-text&quot;&gt;src/app&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;回到浏览器中，刷新页面，如下图所示，就可以游戏了。&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/cded5228992823d0867179bf963591b9/bcc24/bigtree.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 67.80442804428044%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsSAAALEgHS3X78AAADYUlEQVQozwFWA6n8APn6+MrWuLHBqLbFq7bGqMDSqsDRqrnJrLXGrLzOrtzkt93kuNjfueDluuLou9ngv9jeu9Xbtdfct9niqgD+//WlrjOGgRSPihybnhjE1g/FzBayoiGulyGzmR2pnxOtnhalkhizpxequyqWq06WpjKZozmXojyksB0A/P31uMQtrLkNrbkUssIRnZwShHYZe3MaelwbekUYclEadFMaeFAbcl0Zc3Idc28dmZkVrMETq74TrbwRAPz99qu4LJuoCZ+rEK29EnVgFW13EZbDEYSpEVpVGY1iIolfIU1FHIJaIJNmIlc4GnllFrepHq6bHq+/EQD+/vamriyMlQiQmA+bpxJzXBSGmQ2z5wqVuwpqUxOxkTWtlDNfPhKkeim4qj1rQRWWiCLIwHu9rYO+uyUA/v72qrItkJkIlJwPl6IQb1UVanQWdZoRb44RUk8XcVohc1wiRUEXalUeeGQkSzgXiX0Xu8M3q6w7wckWAP7+9qmyLY+YCJKaD52pEHlnFWNuFoerFXeVFVNSGndXH3RVHUlHG29VHnpbH088G5KJGMbMH72+HMbTEwD+/vapsi2PmAiSmg+eqhJzYhd7lQ657AqTwApfVBW4kDCxkS1dQBSneSa+pzVtQhiQgxbD0ka4w0rEyxgA/v72qbEtj5gIk5wOmaQVZ04eanoQjbEOeZwOU0wViWIriGUrUDsUflgjjnAwWzcYfm0Uvckjs70ows4VAP7+96qyLJCZA5ObCZumDnJbFVNhFmmTFl9/F0lfGGSBFmWAFkdeGV55FmiHFUpXF31nF8bMIr7AH8TRFgD+/vWwuzeZqSierjOjsiJqUxR6khK06AyStg1kghGr3Q6n0gxffRGeyw6w4w1qfg6IdhnN0kHCvz/CyxsA/f70pKw9j5c+mJ9RlZ4tYkkTdIwVm8sKgaMMXHkSlsMNkrgLVXQQjbcNmcUMYnQOdFgXvMYptLoqwcwWAP399bbDOqqyIa2wJqq8H398FFtTE2ltF2dpFmdoFGhnE2ZoEWJjGGRnHGBmEV5dFZGRJMDeL7vWLr3UJAD//vSozjt0riJzrCaKuyOtvh2qthZtlSmGqybFxhm1tR22uBXCyzymtEyfqRansB+TuC50uCRwsySJuiF3UIiHwon7IgAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;图片&quot;
        title=&quot;&quot;
        src=&quot;/static/cded5228992823d0867179bf963591b9/b9e4f/bigtree.png&quot;
        srcset=&quot;/static/cded5228992823d0867179bf963591b9/cf440/bigtree.png 148w,
/static/cded5228992823d0867179bf963591b9/d2d38/bigtree.png 295w,
/static/cded5228992823d0867179bf963591b9/b9e4f/bigtree.png 590w,
/static/cded5228992823d0867179bf963591b9/f9b6a/bigtree.png 885w,
/static/cded5228992823d0867179bf963591b9/2d849/bigtree.png 1180w,
/static/cded5228992823d0867179bf963591b9/bbefa/bigtree.png 1770w,
/static/cded5228992823d0867179bf963591b9/bcc24/bigtree.png 2168w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;恭喜你，完成了一个完整的DApp！&lt;/p&gt;</content:encoded></item><item><title><![CDATA[First Forever]]></title><description><![CDATA[最终的代码可以参考：first-forever-simplified 遇到问题如果短时间搞不定，可以参考上面的代码，运行命令：应该就可以将app跑起来了。0 环境安装操作系统推荐使用Mac或者Ubuntu。如果使用 Windows，可以使用虚拟机在Windows…]]></description><link>https://tools.rebase.network/first-forever/</link><guid isPermaLink="false">https://tools.rebase.network/first-forever/</guid><pubDate>Sat, 18 May 2019 22:40:32 GMT</pubDate><content:encoded>&lt;p&gt;最终的代码可以参考：&lt;a href=&quot;https://github.com/NervosBeijingCommunity/first-forever-simplified&quot;&gt;first-forever-simplified&lt;/a&gt; 遇到问题如果短时间搞不定，可以参考上面的代码，运行命令：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;npm install &amp;amp;&amp;amp; npm start&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;应该就可以将app跑起来了。&lt;/p&gt;
&lt;h2&gt;0 环境安装&lt;/h2&gt;
&lt;h3&gt;操作系统&lt;/h3&gt;
&lt;p&gt;推荐使用Mac或者Ubuntu。&lt;/p&gt;
&lt;p&gt;如果使用 &lt;strong&gt;Windows，可以使用虚拟机在Windows系统中安装一个Linux的Ubunut系统，&lt;/strong&gt; 2种做法都可以：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;虚拟机VirtualBox官网下载 &lt;a href=&quot;https://www.virtualbox.org/wiki/Downloads&quot;&gt;https://www.virtualbox.org/wiki/Downloads&lt;/a&gt;，并安装ubunut镜像。&lt;/li&gt;
&lt;li&gt;开启 Windows 10 的 Linux 子系统并安装Ubunut镜像，切记是Windows10，不是Windows8，也不是Windows7，版本不能低于Window10，参考： &lt;a href=&quot;https://www.jianshu.com/p/UpwXzQ&quot;&gt;https://www.jianshu.com/p/UpwXzQ&lt;/a&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;安装node&lt;/h3&gt;
&lt;p&gt;直接下载&lt;a href=&quot;https://nodejs.org/&quot;&gt;Node.js&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;如果熟悉命令行，可以用 &lt;a href=&quot;https://github.com/creationix/nvm&quot;&gt;nvm&lt;/a&gt; 安装Node.js&lt;/p&gt;
&lt;p&gt;命令如下：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.34.0/install.sh | bash

nvm install v10.15.0 # 安装v10.15.0版本的nodejs&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;安装完之后，把npm的官方源替换为淘宝源，国内使用淘宝源下载速度会更快。&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;npm config set registry http://registry.npm.taobao.org/&lt;/code&gt;&lt;/p&gt;
&lt;h3&gt;安装代码编辑器 vscode 稳定版，即Stable版&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;https://code.visualstudio.com/&quot;&gt;visual studio&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;1 创建项目&lt;/h2&gt;
&lt;p&gt;在命令行运行如下命令，安装 create-react-app 工具：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;npm install create-react-app -g # g是global的缩写，即全局的意思&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;教练&lt;/strong&gt;：解释一下什么是npm和package？上面的命令做了什么？&lt;/p&gt;
&lt;p&gt;在命令行运行如下命令，创建项目：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;create-react-app first-forever&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;会创建一个名字为first-forever的项目文件夹&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;教练&lt;/strong&gt;：解释一下上面都做了什么？&lt;/p&gt;
&lt;p&gt;在命令行运行如下命令，运行项目：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;cd first-forever
npm install @cryptape/cita-sdk --save&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;如果有错误提示， 如下：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;npm ERR! code ELiFECYCLE
npm ERR! errno 1
npm ERR! scrypt@6.0.3 install: `node-gyp rebuild`
npm ERR! Exit status 1&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;请看&lt;a href=&quot;./qa.md&quot;&gt;node-gyp安装问题&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;执行&lt;code class=&quot;language-text&quot;&gt;npm start&lt;/code&gt;，几秒钟后会自动打开一个网页 &lt;code class=&quot;language-text&quot;&gt;http://localhost:3000/&lt;/code&gt;，表明项目初始化并运行成功。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;教练&lt;/strong&gt;：介绍一下一个网页从输入网址到显示内容都经历了什么？介绍一下什么是React和HTML有什么关系？&lt;/p&gt;
&lt;h2&gt;2 申请测试链代币&lt;/h2&gt;
&lt;h3&gt;生成账户&lt;/h3&gt;
&lt;p&gt;访问网址获取私钥和地址：&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://service-exvd0ctl-1258120565.ap-beijing.apigateway.myqcloud.com/release/addr&quot;&gt;genEthAddr&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;将生成的私钥和地址保存好，后面会用到。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;不要将这里获取的私钥跟地址，当自己的钱包地址用来存币
不要将这里获取的私钥跟地址，当自己的钱包地址用来存币
不要将这里获取的私钥跟地址，当自己的钱包地址用来存币&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;特别注意，私钥 privateKey 是不能泄露给任何人的。上面这个账户就是临时用一下，所以无所谓了。
于是，account 就到手了。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;教练&lt;/strong&gt;：
解释一下什么是加密货币钱包？
冷钱包和热钱包有啥区别？
地址和私钥是什么？
为什么私钥很重要？&lt;/p&gt;
&lt;p&gt;参考：&lt;a href=&quot;https://learning.nervos.org/nerv-first/6-wallet&quot;&gt;https://learning.nervos.org/nerv-first/6-wallet&lt;/a&gt;&lt;/p&gt;
&lt;h3&gt;充值&lt;/h3&gt;
&lt;p&gt;使用浏览器打开网页 &lt;a href=&quot;https://dapp.cryptape.com/faucet/&quot;&gt;https://dapp.cryptape.com/faucet/&lt;/a&gt; ，然后输入上一步生成的地址(address)，点击 &lt;em&gt;Get Testnet Token&lt;/em&gt; 按钮就可以获取免费的代币了。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img.haoqicat.com/2018091201.jpg&quot; alt=&quot;图片&quot;&gt;&lt;/p&gt;
&lt;p&gt;然后，到 AppChain 的区块链浏览器，也就是 &lt;a href=&quot;http://microscope.cryptape.com/&quot;&gt;microscope.cryptape.com&lt;/a&gt; 上，输入账户地址（address），就可以查询到账户余额了，数值是 0x 打头的，也就是8进制表示的。&lt;/p&gt;
&lt;p&gt;这样账户中就有了余额，后续操作就都可以顺利进行了。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img.haoqicat.com/2018091202.jpg&quot; alt=&quot;图片&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;教练&lt;/strong&gt;：解释一下什么是Nervos？解释一下什么是区块链浏览器？&lt;/p&gt;
&lt;p&gt;参考：&lt;a href=&quot;https://learning.nervos.org/nerv-first/2-nervos&quot;&gt;https://learning.nervos.org/nerv-first/2-nervos&lt;/a&gt;
Nervos 是一个网络，分上下两层，底层的 CKB 负责安全和共识，上层的各种方案保证性能。Nervos 要为各个企业搭建自己的公链和开发 DApp 提供成套的基础设施，让大家直接上手就能实现自己的想法，而不必重新造轮子。&lt;/p&gt;
&lt;h2&gt;3 部署智能合约&lt;/h2&gt;
&lt;p&gt;使用代码编辑器打开创建的first-forever文件夹，在文件夹src/下创建一个文件config.js，添加如下代码：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;const config = {
  chain: &amp;#39;https://node.cryptape.com&amp;#39;,
  contractAddress: &amp;#39;&amp;#39;, // 暂时留空，后面会添加
  fromAddress: &amp;#39;YOUR_ADDRESS&amp;#39;,
  privateKey: &amp;#39;YOUR_PRIVATE_KEY&amp;#39;
}
module.exports = config&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;将fromAddress, privateKey(私钥)替换成自己的，contractAddress在后面部署合约成功后再添加。&lt;/p&gt;
&lt;p&gt;这样配置文件就写好了。&lt;/p&gt;
&lt;p&gt;在文件夹 &lt;code class=&quot;language-text&quot;&gt;src/&lt;/code&gt;下创建一个文件 &lt;code class=&quot;language-text&quot;&gt;nervos.js&lt;/code&gt;，添加如下代码：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;const {
  default: Nervos
} = require(&amp;#39;@cryptape/cita-sdk&amp;#39;)

const config = require(&amp;#39;./config&amp;#39;)

const nervos = Nervos(config.chain) // config.chain indicates that the address of Appchain to interact
const account = nervos.base.accounts.privateKeyToAccount(config.privateKey) //create account by private key from config

nervos.base.accounts.wallet.add(account)

module.exports = nervos&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;创建 nervos.js 文件，初始化 nervos 对象。通过使用 config.chain ，指定了要跟哪条区块链进行交互。privateKeyToAccount 用私钥生成 account。
通过 wallet.add 接口把 account 添加到了 nervos 对象中并最终导出。&lt;/p&gt;
&lt;p&gt;在文件夹&lt;code class=&quot;language-text&quot;&gt;src/&lt;/code&gt;下创建一个文件&lt;code class=&quot;language-text&quot;&gt;simpleStore.js&lt;/code&gt;，添加如下代码：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;const nervos = require(&amp;#39;./nervos&amp;#39;)
const {
  abi
} = require(&amp;#39;./contracts/compiled.js&amp;#39;)
const {
  contractAddress
} = require(&amp;#39;./config&amp;#39;)

const transaction = require(&amp;#39;./contracts/transaction&amp;#39;)
const simpleStoreContract = new nervos.base.Contract(abi, contractAddress)
module.exports = {
  transaction,
  simpleStoreContract
}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;打开网址 &lt;a href=&quot;https://remix.ethereum.org/&quot;&gt;https://remix.ethereum.org/&lt;/a&gt; 将下面的代码粘贴到remix的代码编辑区域中，代码也可以从这个网址得到：&lt;a href=&quot;https://github.com/NervosBeijingCommunity/first-forever-simplified/blob/master/src/contracts/SimpleStore.sol&quot;&gt;https://github.com/NervosBeijingCommunity/first-forever-simplified/blob/master/src/contracts/SimpleStore.sol&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;教练&lt;/strong&gt;：介绍一下智能合约和Solidity？Solidity有哪些优点更适合做智能合约开发？&lt;/p&gt;
&lt;p&gt;参考：&lt;a href=&quot;https://learning.nervos.org/nerv-first/3-dev&quot;&gt;https://learning.nervos.org/nerv-first/3-dev&lt;/a&gt;
&lt;a href=&quot;https://learning.nervos.org/nerv-first/4-sol&quot;&gt;https://learning.nervos.org/nerv-first/4-sol&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;pragma solidity ^0.4.24; // 版本等于0.4.24才可以编译

contract SimpleStore {
    mapping (address =&amp;gt; mapping (uint256 =&amp;gt; string)) private records;
    /*
        mapping类型 理解为字典
        0x81acb7ffda65c125646ac9b8d98cf47c170c01a9 =&amp;gt; {1231006505 =&amp;gt; &amp;quot;The Times 03/Jan/2009 Chancellor on brink of second bailout for banks&amp;quot;}
     */

    mapping (address =&amp;gt; uint256[]) private categories;
    /*
        0x81acb7ffda65c125646ac9b8d98cf47c170c01a9 =&amp;gt; 235833
        0x398ca5cf715201c8c3ebf301ce8f0ed577a3f258 =&amp;gt; 623735
    */

    event Recorded(address _sender, string indexed _text, uint256 indexed _time); // 定义事件

    function _addToList(address from, uint256 time) private { // 私有方法
        categories[from].push(time); // mapping 添加一个元素
    }

    function getList()
    public // public是公共方法
    view // view 表示这个查询方法,不改变数据的状态
    returns (uint256[])// 返回的数据类型
    {
        return categories[msg.sender];
    }

    function add(string text, uint256 time) public { // 公共方法, 外部可以调用
        records[msg.sender][time]=text; // 赋值
        _addToList(msg.sender, time); // 调用方法
        emit Recorded(msg.sender, text, time); // 触发事件
    }

    function get(uint256 time) public view returns(string) { // 公共方法, 外部可以调用
        return records[msg.sender][time];
    }
}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;https://uploader.shimo.im/f/wTAoWHk5oEQ2NjW9.png!thumbnail&quot; alt=&quot;图片&quot;&gt;&lt;/p&gt;
&lt;p&gt;然后点右侧的 start to compile进行编译。这里需要注意，有的时候需要稍微提高一下合约声明的版本号，才能编译通过。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img.haoqicat.com/2018091204.jpg&quot; alt=&quot;图片&quot;&gt;&lt;/p&gt;
&lt;p&gt;编译的输出可以通过点 details 按钮得到。
这样合约就编译好了。&lt;/p&gt;
&lt;p&gt;在文件夹&lt;code class=&quot;language-text&quot;&gt;src/&lt;/code&gt;下创建文件夹&lt;code class=&quot;language-text&quot;&gt;contracts&lt;/code&gt;，然后再文件夹中创建一个文件&lt;code class=&quot;language-text&quot;&gt;compiled.js&lt;/code&gt;，并添加如下代码：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;// deploy/compiled.js
const bytecode = &amp;#39;稍后替换成真正的值&amp;#39;
const abi = &amp;#39;稍后替换成真正的值&amp;#39;
module.exports = {
    abi,
    bytecode
}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;其中 bytecode 一项，就是 remix 最终编译结果中 bytecode 一项下的 &lt;strong&gt;object 那个字段的值&lt;/strong&gt;，
是一个长长的字符串，这点要注意，不要把全部内容都复制过来。如下图所示，就是 “6080…” 开始的这个双引号中的值。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://uploader.shimo.im/f/h0FDy0TqDgAGu6nk.png!thumbnail&quot; alt=&quot;图片&quot;&gt;&lt;/p&gt;
&lt;p&gt;而 abi 一项就是一个数组，就直接在 remix 界面中的 abi 一项下，直接点 copy 图标。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://uploader.shimo.im/f/iDx1G9x7pTUlqqWq.png!thumbnail&quot; alt=&quot;图片&quot;&gt;&lt;/p&gt;
&lt;p&gt;然后把拷贝到的内容粘贴到 compiled.js 文件中即可。&lt;/p&gt;
&lt;p&gt;我在 Github 上也上传了一个真实可用的版本供大家参考：&lt;a href=&quot;https://github.com/NervosBeijingCommunity/first-forever-simplified/blob/master/src/contracts/compiled.js&quot;&gt;https://github.com/NervosBeijingCommunity/first-forever-simplified/blob/master/src/contracts/compiled.js&lt;/a&gt; 。&lt;/p&gt;
&lt;p&gt;在文件夹&lt;code class=&quot;language-text&quot;&gt;src/contracts/&lt;/code&gt;下创建一个文件&lt;code class=&quot;language-text&quot;&gt;transaction.js&lt;/code&gt;，添加如下代码：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;const nervos = require(&amp;#39;../nervos&amp;#39;)

const transaction = {
  from: nervos.base.accounts.wallet[0].address,
  privateKey: nervos.base.accounts.wallet[0].privateKey,
  nonce: 999999,
  quota: 1000000,
  chainId: 1,
  version: 1,
  validUntilBlock: 999999,
  value: &amp;#39;0x0&amp;#39;
};

module.exports = transaction&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;创建 &lt;code class=&quot;language-text&quot;&gt;transaction.js&lt;/code&gt; 文件, from 一项指定了我们自己账户的地址。注意这里没有 to 也就是没有接收方。privateKey 一项用来指定私钥。&lt;strong&gt;特别说明一下，私钥是不能暴露给任何人的，这里为了演示方便，我们直接把私钥写到了代码中，但是实际的 DApp 一般都是开源软件，所以私钥是不能写到代码中的。&lt;/strong&gt;
AppChain 的解决方式是把私钥保存到 Neuron 钱包中，需要进行交易的时候，让代码跟 Neuron 交互来完成签名。
当然，我们这里还是先不涉及 Neuron ，暂时把私钥写到了代码中。value 是交易数额，这里设置为0。
后面的 quota，nonce ，chainId ，version ，validUntilBlock 都是跟交易安全相关的设置，可以到 AppChain 的核心，也就是 CITA 的官方文档上，找到各自的含义：&lt;a href=&quot;https://docs.nervos.org/cita/#/rpc_guide/rpc&quot;&gt;https://docs.nervos.org/cita/#/rpc_guide/rpc&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;在文件夹&lt;code class=&quot;language-text&quot;&gt;src/contracts/&lt;/code&gt;下创建一个文件&lt;code class=&quot;language-text&quot;&gt;deploy.js&lt;/code&gt;，添加如下代码：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;const nervos = require(&amp;#39;../nervos&amp;#39;)
const {
  abi,
  bytecode
} = require(&amp;#39;./compiled.js&amp;#39;)

const transaction = require(&amp;#39;./transaction&amp;#39;)
let _contractAddress = &amp;#39;&amp;#39;
// contract contract instance
const myContract = new nervos.base.Contract(abi)

nervos.base.getBlockNumber().then(current =&amp;gt; {
    transaction.validUntilBlock = +current + 88 // update transaction.validUntilBlock
    // deploy contract
    return myContract.deploy({
      data: bytecode,
      arguments: [],
    }).send(transaction)
  }).then(txRes =&amp;gt; {
    if (txRes.hash) {
      // get transaction receipt
      return nervos.listeners.listenToTransactionReceipt(txRes.hash)
    } else {
      throw new Error(&amp;quot;No Transaction Hash Received&amp;quot;)
    }
  })
  .then(res =&amp;gt; {
    const {
      contractAddress,
      errorMessage,
    } = res
    if (errorMessage) throw new Error(errorMessage)
    console.log(`contractAddress is: ${contractAddress}`)
    _contractAddress = contractAddress
    return nervos.base.storeAbi(contractAddress, abi, transaction) // store abi on the chain
  }).then(res =&amp;gt; {
    if (res.errorMessage) throw new Error(res.errorMessage)
    return nervos.base.getAbi(_contractAddress,&amp;#39;pending&amp;#39;).then(console.log) // get abi from the chain
  }).catch(err =&amp;gt; console.error(err))&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;创建 deploy.js，用来 deploy 字节码，然后就可以从 receipt 也就是回执中，得到合约地址并打印出来。
通过 storeAbi 接口把合约 ABI 发送到链上。具体各个接口的描述可以参考 Nervos.js 的 npm 主页：&lt;a href=&quot;https://www.npmjs.com/package/@cryptape/cita-sdk&quot;&gt;@cryptape/cita-sdk&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;在命令行运行命令：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;node src/contracts/deploy.js&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;部署成功，可以看到打印出了合约地址和 ABI 信息。&lt;/p&gt;
&lt;p&gt;然后打开连接 &lt;a href=&quot;https://microscope.cryptape.com/&quot;&gt;https://microscope.cryptape.com/&lt;/a&gt; 搜索打印出的合约地址，发现出现的就是一个 Account ，下面有 contract 一项。点开，可以看到合约代码中对应的三个接口的相关界面。&lt;/p&gt;
&lt;p&gt;打开&lt;code class=&quot;language-text&quot;&gt;src/config.js&lt;/code&gt;文件，修改&lt;code class=&quot;language-text&quot;&gt;contractAddress&lt;/code&gt;的值为上面得到的合约地址：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;const config = {
  chain: &amp;#39;https://node.cryptape.com&amp;#39;,
  contractAddress: &amp;#39;上面得到的合约地址&amp;#39;,  // 修改这一行
  fromAddress: &amp;#39;YOUR_ADDRESS&amp;#39;,
  privateKey: &amp;#39;YOUR_PRIVATE_KEY&amp;#39;
}
module.exports = config&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;这样我们合约部分的代码就完成了。&lt;/p&gt;
&lt;h2&gt;4 与合约交互&lt;/h2&gt;
&lt;p&gt;清空&lt;code class=&quot;language-text&quot;&gt;src/App.js&lt;/code&gt;文件内容，并添加如下代码：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;// src/App.js
import React from &amp;#39;react&amp;#39;
import &amp;#39;./App.css&amp;#39;
import { transaction, simpleStoreContract } from &amp;#39;./simpleStore&amp;#39;
import nervos from &amp;#39;./nervos&amp;#39;

const Submit = ({ text = &amp;#39;愿此刻永恒&amp;#39;, onClick, disabled = false }) =&amp;gt; (
  &amp;lt;button
    onClick={onClick}
    className={`confirm__button--primary ${disabled ? &amp;#39;confirm__button--disabled&amp;#39; : &amp;#39;&amp;#39;}`}
    disabled={disabled}
  &amp;gt;
    {text}
  &amp;lt;/button&amp;gt;
)

const Record = ({ time, text, hasYearLabel }) =&amp;gt; {
  const _time = new Date(+time);
  const timeFormatter = time =&amp;gt; (&amp;#39;&amp;#39; + time).padStart(2, &amp;#39;0&amp;#39;);

  return (
    &amp;lt;div className=&amp;quot;list__record--container&amp;quot;&amp;gt;
      {hasYearLabel ? &amp;lt;div className=&amp;quot;list__record--year&amp;quot;&amp;gt;{_time.getFullYear()}&amp;lt;/div&amp;gt; : null}
      &amp;lt;span&amp;gt;{`${_time.getMonth() + 1}-${timeFormatter(_time.getDate())} ${timeFormatter(_time.getHours())}:${timeFormatter(_time.getMinutes())}`}&amp;lt;/span&amp;gt;
      &amp;lt;div&amp;gt;{text}&amp;lt;/div&amp;gt;
    &amp;lt;/div&amp;gt;
  )
}

const timeFormatter = time =&amp;gt; (&amp;#39;&amp;#39; + time).padStart(2, &amp;#39;0&amp;#39;)

const submitTexts = {
  normal: &amp;#39;愿此刻永恒&amp;#39;,
  submitting: &amp;#39;保存中&amp;#39;,
  submitted: &amp;#39;保存成功&amp;#39;,
}

class App extends React.Component {
  state = {
    text: &amp;#39;&amp;#39;,
    time: new Date(),
    submitText: submitTexts.normal,
    errorText: &amp;#39;&amp;#39;,
    times: [],
    texts: [],
  }
  componentDidMount() {
    this.fetchList();
  }
  handleInput = e =&amp;gt; {
    this.setState({ text: e.target.value })
  }
  handleSubmit = e =&amp;gt; {
    const { time, text } = this.state
    nervos.base
      .getBlockNumber()
      .then(current =&amp;gt; {
        const tx = {
          ...transaction,
          validUntilBlock: +current + 88,
        }
        this.setState({
          submitText: submitTexts.submitting,
        })
        return simpleStoreContract.methods.add(text, +time).send(tx)
      })
      .then(res =&amp;gt; {
        if (res.hash) {
          return nervos.listeners.listenToTransactionReceipt(res.hash)
        } else {
          throw new Error(&amp;#39;No Transaction Hash Received&amp;#39;)
        }
      })
      .then(receipt =&amp;gt; {
        if (!receipt.errorMessage) {
          this.setState({ submitText: submitTexts.submitted })
        } else {
          throw new Error(receipt.errorMessage)
        }
      })
      .then(() =&amp;gt; {
        // FIXME: seems it does not work
        this.fetchList();
      })
      .catch(err =&amp;gt; {
        this.setState({ errorText: JSON.stringify(err) })
      })
  }
  fetchList() {
    const from = nervos.base.accounts.wallet[0] ? nervos.base.accounts.wallet[0].address : &amp;#39;&amp;#39;;
    simpleStoreContract.methods
      .getList()
      .call({
        from,
      })
      .then(times =&amp;gt; {
        times.reverse()
        this.setState({ times })
        return Promise.all(times.map(time =&amp;gt; simpleStoreContract.methods.get(time).call({ from })))
      })
      .then(texts =&amp;gt; {
        this.setState({ texts })
      })
      .catch(console.error)
  }
  render() {
    const { times, texts, time, text, submitText, errorText } = this.state
    console.log(&amp;#39;render: &amp;#39;, texts)
    const List = (
      &amp;lt;div className=&amp;quot;list__record--page&amp;quot;&amp;gt;
        {times.map((time, idx) =&amp;gt; (
          &amp;lt;Record
            time={time}
            text={texts[idx]}
            key={time}
            hasYearLabel={idx === 0 || new Date(+time).getFullYear() !== new Date(+times[idx - 1]).getFullYear()}
          /&amp;gt;
        ))}
      &amp;lt;/div&amp;gt;
    );
    const Add = (
      &amp;lt;div className=&amp;quot;add__content--container&amp;quot;&amp;gt;
        &amp;lt;div className=&amp;quot;add__time--container&amp;quot;&amp;gt;
          &amp;lt;span className=&amp;quot;add__time--year&amp;quot;&amp;gt;{time.getFullYear()}&amp;lt;/span&amp;gt;
          :
          &amp;lt;span className=&amp;quot;add__time--month&amp;quot;&amp;gt;{time.getMonth() + 1}&amp;lt;/span&amp;gt;
          :
          &amp;lt;span className=&amp;quot;add__time--day&amp;quot;&amp;gt;{timeFormatter(time.getDate())}&amp;lt;/span&amp;gt;
          :
          &amp;lt;span className=&amp;quot;add__time--hour&amp;quot;&amp;gt;{timeFormatter(time.getHours())}&amp;lt;/span&amp;gt;
          :
          &amp;lt;span className=&amp;quot;add__time--min&amp;quot;&amp;gt;{timeFormatter(time.getMinutes())}&amp;lt;/span&amp;gt;
        &amp;lt;/div&amp;gt;
        &amp;lt;div className=&amp;quot;add__content--prompt&amp;quot;&amp;gt;
          &amp;lt;span&amp;gt;把你觉得重要的一刻，存放在链上，永远保存，随时查看&amp;lt;/span&amp;gt;
        &amp;lt;/div&amp;gt;
        &amp;lt;textarea
          cols=&amp;quot;32&amp;quot;
          rows=&amp;quot;10&amp;quot;
          className=&amp;quot;add__content--textarea&amp;quot;
          placeholder=&amp;quot;留下你的时光吧...&amp;quot;
          onChange={this.handleInput}
          value={text}
        /&amp;gt;
        &amp;lt;Submit text={submitText} onClick={this.handleSubmit} disabled={submitText !== submitTexts.normal} /&amp;gt;
        {errorText &amp;amp;&amp;amp; &amp;lt;span className=&amp;quot;warning&amp;quot;&amp;gt;{errorText}&amp;lt;/span&amp;gt;}
      &amp;lt;/div&amp;gt;
    )
    return (
      &amp;lt;div&amp;gt;
        {Add}
        {List}
      &amp;lt;/div&amp;gt;
    )
  }
}

export default App&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;清空&lt;code class=&quot;language-text&quot;&gt;src/App.css&lt;/code&gt;文件内容，并添加如下代码：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;// src/App.css
.add__content--container {
  padding: 0 15px;
}

.add__content--container&amp;gt;div,
.add__content--container&amp;gt;input,
.add__content--container&amp;gt;textarea,
.add__content--container&amp;gt;button {
  margin: 15px 0;
}

.add__content--container&amp;gt;textarea {
  margin-bottom: 31px;
}

.add__content--container&amp;gt;div {
  margin-bottom: 0;
}

.add__time--container {
  background: #fff;
  border-radius: 4px;
  text-align: center;
  padding: 23px 0;
  box-shadow: 0 10px 10px 0 rgba(254, 121, 43, 0.05);
}

.add__time--year,
.add__time--month,
.add__time--day,
.add__time--hour,
.add__time--min {
  font-weight: bold;
  border: 1px solid #e3e3e3;
  padding: 9px 8px;
  font-size: 22px;
  border-radius: 4px;
  margin: 0 6px;
}

.add__content--prompt {
  color: #828181;
  font-size: 12px;
}

.add__content--prompt svg {
  margin-right: 8px;
}

.add__content--textarea {
  display: block;
  width: 100%;
  border-radius: 4px;
  border: none;
  background: #fff;
  box-shadow: 0 10px 10px 0 rgba(254, 121, 43, 0.05);
  resize: none;
  padding: 12px;
}

.add__content--pic {
  position: relative;
  background: #fff;
  border-radius: 4px;
  box-shadow: 0 10px 10px 0 rgba(254, 121, 43, 0.05);
  resize: none;
  padding: 11px 18px;
}

.add__content--pic input {
  opacity: 0;
  position: absolute;
  top: 0;
  left: 0;
}

.list__record--page {
  margin: 22px;
  border-left: 2px solid rgba(254, 121, 43, 0.2);
  margin-bottom: 70px;
}

.list__record--container {
  font-size: 14px;
  margin-right: 0;
  padding: 22px;
}

.list__record--container span {
  position: relative;
  color: #828181;
  line-height: 2;
}

.list__record--container span::before {
  display: block;
  content: &amp;#39;&amp;#39;;
  position: absolute;
  top: 6px;
  left: -27px;
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: #fb7f5b;
  opacity: 0.5;
}

.list__record--container div {
  background: #FFF;
  border-radius: 4px;
  padding: 16px 10px 20px;
  color: #1E1E21;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  box-shadow: 0 10px 10px 0 rgba(254, 121, 43, 0.05);
}

.list__record--container div.list__record--year {
  position: relative;
  padding: 0;
  background: none;
  box-shadow: none;
  overflow: visible;
  font-size: 24px;
  margin-bottom: 15px;
  font-weight: 900;
}

.list__record--container div.list__record--year::before {
  display: block;
  content: &amp;#39;&amp;#39;;
  position: absolute;
  top: 13px;
  left: -27px;
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: #fb7f5b;
}

.list__record--container div.list__record--year::after {
  display: block;
  content: &amp;#39;&amp;#39;;
  position: absolute;
  top: 9px;
  left: -31px;
  width: 16px;
  height: 16px;
  border-radius: 50%;
  background: #fb7f5b;
  opacity: 0.5;
}

.confirm__button--primary {
  display: block;
  margin: 3.8vh 0;
  width: 100%;
  border: none;
  height: 44px;
  line-height: 44px;
  text-align: center;
  border-radius: 4px;
  font-size: 16px;
  color: #fff;
  background: #fe792b;
  box-shadow: 0 0 10px 0 #fe792b;
}

.confirm__button--disabled {
  color: #aaa !important;
  background: #eee !important;
  box-shadow: 0 0 10px 0 #eee !important;
}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;回到浏览器中，查看页面，如下图所示。这时就可以添加文字并提交到区块链了，刷新页面后就可以看到最新添加的文字了。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;./example/img/finish.png&quot; alt=&quot;图片&quot;&gt;&lt;/p&gt;
&lt;p&gt;恭喜你，完成了一个完整的DApp！（完）&lt;/p&gt;</content:encoded></item></channel></rss>